<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PasswordKeepR</title>

  <link rel="stylesheet" href="/vendor/normalize-4.1.1.css" />
  <link rel="stylesheet" href="/vendor/border-box.css" />
  <link rel="stylesheet" href="/styles/main.css" />
  <link rel="stylesheet" href="/styles/layout.css" />

  <!-- External Google Font ABeeZee -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Bungee&family=Source+Sans+Pro:ital,wght@0,300;0,600;1,300;1,600&display=swap" rel="stylesheet">

  <!-- External Google Font Alata -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Bungee&family=Source+Sans+Pro:ital,wght@0,300;0,600;1,300;1,600&display=swap" rel="stylesheet">

  <!-- jQuery CDN -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

  <!-- Scripts - list.js -->
  <script type="text/javascript" src="/scripts/list.js"></script>

  <!-- Font Awesome Icon CDN CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css" integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w==" crossorigin="anonymous" referrerpolicy="no-referrer" />

  <!-- Nav CSS -->
  <link rel="stylesheet" href="/styles/header.css" type="text/css" />

  <script defer src="/scripts/app.js"></script>

</head>
<body class="password-list-body">
  <%- include('partials/_header') %>
  <div class="topnav">
    <h3>My Passwords</h3>
    <div>
      <form method="GET" action="/list/add">
      <button type="submit" class="add-button">Add</button>
    </form>
    </div>
  </div>
  <table>
  <tbody>
    <tr>
      <th>Name</th>
      <th>URL</th>
      <th>Username</th>
      <th>Password</th>
      <th>Category</th>
    </tr>
    <% for (let password of passwords) { %>
      <tr>
        <td><%= password['name'] %></td>
        <td><a href="<%= password['url'] %>"><%= password['url'] %></a></td>
        <td><%= password['username'] %></td>
        <td id="password-text-<%= password['id'] %>"><%= password['password'] %></td>
        <td><%= password['category'] %></td>
        <td class="dropdown-options">
          <button class="dropbtn"><i class="fa-solid fa-ellipsis-vertical"></i></button>
          <div id="dropdown" class="dropdown-content">
            <a id="copy-password-<%= password['id'] %>">Copy Password</a>
            <form method="GET" action="/list/pass_<%- password['id'] %>" id="edit-form-<%= password['id'] %>"></form>
            <a onclick="document.getElementById('edit-form-<%= password['id'] %>').submit(); return false;">Edit</a>
            <form method="POST" action="/list/pass_<%- password['id'] %>/delete" id="delete-form-<%= password['id'] %>"></form>
            <a onclick="document.getElementById('delete-form-<%= password['id'] %>').submit(); return false;">Delete</a>
          </div>
        </td>
      </tr>
   <% } %>
  </tbody>
</table>
</body>
</html>
